<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Report Found Item | Cloud</title>
    <style>
        :root { --orange: #f39c12; --bg: #0f0f0f; }
        body { background: radial-gradient(circle, #2c1a05, var(--bg)); color: white; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: rgba(255,255,255,0.05); padding: 30px; border-radius: 20px; border: 1px solid #333; width: 400px; backdrop-filter: blur(10px); }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #222; color: white; box-sizing: border-box; }
        .btn { width: 100%; padding: 12px; background: #27ae60; border: none; color: white; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <div class="card">
        <h2 style="color: var(--orange); text-align:center;">Report Found Item</h2>
        <form id="foundForm">
            <input type="text" id="foundName" placeholder="Item Name" required>
            <input type="text" id="foundLoc" placeholder="Where did you find it?" required>
            <textarea id="foundDesc" placeholder="Brief description..." rows="3"></textarea>
            <label style="font-size: 12px; color: #888;">Upload Photo:</label>
            <input type="file" id="foundImg" accept="image/*" required>
            <button type="submit" class="btn">PUSH TO CLOUD</button>
        </form>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDqc9Hg0HlFtaEfYaQCxm9wXHjUNtX5q-Y",
            authDomain: "lostfoundbackup.firebaseapp.com",
            databaseURL: "https://lostfoundbackup-default-rtdb.firebaseio.com",
            projectId: "lostfoundbackup",
            storageBucket: "lostfoundbackup.firebasestorage.app",
            messagingSenderId: "470646348177",
            appId: "1:470646348177:web:7b05e6a999512bb6cd6230"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        document.getElementById('foundForm').onsubmit = (e) => {
            e.preventDefault();
            const user = JSON.parse(localStorage.getItem('currentUser'));
            const file = document.getElementById('foundImg').files[0];
            const reader = new FileReader();

            reader.readAsDataURL(file);
            reader.onload = (event) => {
                const newItem = {
                    name: document.getElementById('foundName').value,
                    location: document.getElementById('foundLoc').value,
                    desc: document.getElementById('foundDesc').value,
                    image: event.target.result,
                    founder: user ? user.name : "Anonymous",
                    status: "In Storage"
                };

                database.ref('globalItems').push(newItem).then(() => {
                    alert("Added to Cloud successfully!");
                    window.location.href = 'loser-gallery.html';
                });
            };
        };
    </script>
</body>
</html>